https://leetcode.com/problems/maximum-value-at-a-given-index-in-a-bounded-array/description/

class Solution {
    public int maxValue(int n, int index, int maxSum) {
        int low = 1, high = maxSum;
        while (low < high) {
            int mid = (low + high + 1) / 2;
            if (isValid(mid, n, index, maxSum)) 
                low = mid;
             else 
                high = mid - 1;
        }
        return low;
    }
    private boolean isValid(int val, int n, int index, int maxSum) {
        long leftSum = sumSide(val - 1, index);
        long rightSum = sumSide(val - 1, n - index - 1);
        long total = leftSum + rightSum + val;
        return total <= maxSum;
    }
    private long sumSide(int peak, int count) {
        if (peak >= count) {
            long first = peak - count + 1;
            return (long)(peak + first) * count / 2;
        } else {
            long full = (long)(peak + 1) * peak / 2;
            return full + (count - peak);
        }
    }
}
